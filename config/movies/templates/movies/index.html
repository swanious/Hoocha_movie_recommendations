{% extends 'base.html' %}

{% block content %}
<h1>MOVIE LIST</h1>
<ul class="pagination">

  <div class="row">
    <div class="col-4">
      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active" data-interval="2000">
          </div>
          {% for movie in movies %}
            <div class="carousel-item">
              <img style="object-fit: cover;" src="{{ movie.backdrop_path }}" alt="movie_img">
            </div>
          {% endfor %}
          </div>
        </div>  
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>

    <div class="col-4">
      <div id="carouselExampleControls" class="carousel slide col-4" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active" data-interval="2000">
          </div>
          {% for movie in movies|slice:"1:" %}
            <div class="carousel-item">
              <img style="object-fit: cover;" src="{{ movie.backdrop_path }}" alt="movie_img">
            </div>
          {% endfor %}
          </div>
        </div>  
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>

    <div class="col-4">
      <div id="carouselExampleControls" class="carousel slide col-4" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active" data-interval="2000">
          </div>
          {% for movie in movies|slice:"2:" %}
            <div class="carousel-item">
              <img style="object-fit: cover;" src="{{ movie.backdrop_path }}" alt="movie_img">
            </div>
          {% endfor %}
          </div>
        </div>  
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
  </div>

  {% for movie in movies %}
    <!-- modal button -->
    <a data-toggle="modal" data-target="#staticBackdrop{{ movie.id }}">
      <img src="{{ movie.poster_path }}" alt="{{ movie.title }}">
    </a>

    <!-- Modal -->
    <div width="500px" class="modal fade" id="staticBackdrop{{ movie.id }}" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">{{ movie.title }}</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <img width="450px" src="{{ movie.backdrop_path }}" alt="movie_img">
            <p>{{ movie.popularity }}</p>
            <p>{{ movie.video }}</p>
            <p>{{ movie.vote_count }}</p>
            <p>{{ movie.vote_average }}</p>
            <p>{{ movie.release_date }}</p>
            <p>{{ movie.original_language }}</p>
            <p>{{ movie.original_title }}</p>
            <p>{{ movie.adult }}</p>
            <p>{{ movie.overview }}</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</ul>
{% endblock content %}

{% block script %}
  <script>
    $('.carousel').carousel({
      interval: 2000
    })
  </script>
{% endblock %}